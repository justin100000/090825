<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Happy 4 Months, Sophia! üíñ</title>
  <meta name="description" content="An interactive love letter with a playful entry quiz, floating hearts surprise, and spammable compliments." />
  <meta name="theme-color" content="#ff6b9e" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Caveat:wght@600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --pink:#ff6b9e; --peach:#ffb199; --soft:#ffe7ef; --ink:#342e37; --card:#ffffffcc; --shadow:0 20px 45px rgba(0,0,0,.12); --radius:22px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;color:var(--ink);
      background: radial-gradient(1200px 800px at 15% -10%, #ffd1dc 0%, transparent 50%),
                  radial-gradient(1000px 700px at 100% 0%, #ffd9cc 0%, transparent 55%),
                  linear-gradient(180deg, #fff 0%, #ffeef5 100%);
      overflow-x:hidden;
    }
    .wrap{max-width:900px;margin:0 auto;padding:28px}
    header.hero{display:flex;align-items:center;justify-content:center;flex-direction:column;gap:8px;text-align:center;padding:36px 18px 18px}
    .title{font-family:Caveat,system-ui;font-size:clamp(2.2rem,6vw,4.2rem);line-height:1.08;margin:6px 0;color:#db2672}
    .card{background:var(--card);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.75);border-radius:var(--radius);box-shadow:var(--shadow)}
    .center-card{max-width:820px;margin:20px auto;padding:22px}
    .cta{display:inline-flex;align-items:center;gap:10px;border:none;background:linear-gradient(90deg,var(--pink),var(--peach));color:#fff;padding:14px 20px;border-radius:999px;font-weight:700;cursor:pointer;transition:transform .1s ease,filter .2s ease;box-shadow:0 10px 25px rgba(255,107,158,.35)}
    .cta:hover{transform:translateY(-1px)}
    .cta:active{transform:translateY(1px)}
    .letter{font-size:1.06rem;line-height:1.85;white-space:pre-wrap;min-height:220px;position:relative}
    .type-caret{position:absolute;width:2px;height:1.2em;background:var(--pink);display:inline-block;animation:blink 1s steps(1,end) infinite}
    @keyframes blink{50%{opacity:0}}
    footer{margin:30px 0 60px;text-align:center;opacity:.7}
    .float-area{pointer-events:none;position:fixed;inset:0;overflow:hidden;z-index:0}
    .heart{position:absolute;font-size:14px;animation:floatUp linear forwards;opacity:.9}
    @keyframes floatUp{0%{transform:translateY(110vh) scale(.9);opacity:0}10%{opacity:1}100%{transform:translateY(-10vh) scale(1.3);opacity:0}}
    .gate{position:fixed;inset:0;display:grid;place-items:center;background:rgba(255,241,246,.92);backdrop-filter:blur(5px);z-index:50}
    .gate .box{max-width:720px}
    .gate h2{margin:0 0 8px}
    .gate p{margin:6px 0}
    .row{display:flex;gap:8px;margin-top:10px}
    input[type="password"],input[type="text"]{flex:1;padding:12px 14px;border:2px solid #ffd3e1;border-radius:12px;font-size:1rem}
    .hint{font-size:.92rem;opacity:.8;margin-top:6px}
    .progress{display:flex;gap:6px;margin-top:12px}
    .dot{width:10px;height:10px;border-radius:50%;background:#ffd3e1;border:2px solid #ff9fbd}
    .dot.on{background:var(--pink)}
    .err{color:#c6285b;font-weight:600;min-height:1.4em}
    .love-note{position:fixed;z-index:20;max-width:260px;background:#fff;border:2px dashed #ffc2d4;border-radius:16px;box-shadow:0 8px 26px rgba(0,0,0,.15);padding:12px 14px;font-size:.98rem}
    .love-note b{color:#db2672}
    .pop{animation:pop .5s ease, fade 2.6s 2.1s ease forwards}
    @keyframes pop{0%{transform:scale(.9);opacity:0}60%{transform:scale(1.05);opacity:1}100%{transform:scale(1)}}
    @keyframes fade{to{opacity:0;transform:translateY(-10px)}}
    .controls{display:flex;justify-content:center;margin-top:14px}
  </style>
</head>
<body>
  <div class="float-area" id="float-area" aria-hidden="true"></div>

  <!-- QUIZ GATE -->
  <div class="gate" id="gate">
    <div class="box card" style="padding:22px">
      <h2 class="title" style="margin-bottom:4px">Hi Sophia ‚Äî one tiny quiz to enter üíå</h2>
      <p>There are <b>three</b> little passwords that only you would know. Get them right to open your letter. (Hints included!)</p>

      <div id="q1" class="q">
        <p style="margin:10px 0 6px"><b>1) First password</b></p>
        <div class="row"><input id="in1" type="password" placeholder="Type here‚Ä¶" autocomplete="off" /><button class="cta" id="btn1">Unlock 1</button></div>
        <div class="hint">Hint: <i>im+(my middle name)+inlovewithyou</i></div>
      </div>

      <div id="q2" class="q" style="display:none">
        <p style="margin:14px 0 6px"><b>2) Second password</b></p>
        <div class="row"><input id="in2" type="password" placeholder="Type here‚Ä¶" autocomplete="off" /><button class="cta" id="btn2">Unlock 2</button></div>
        <div class="hint">Hint: <i>(what bug is on your wrist)</i></div>
      </div>

      <div id="q3" class="q" style="display:none">
        <p style="margin:14px 0 6px"><b>3) Third password</b></p>
        <div class="row"><input id="in3" type="password" placeholder="Type here‚Ä¶" autocomplete="off" /><button class="cta" id="btn3">Enter üíñ</button></div>
        <div class="hint">Hint: <i>(name of your bear)</i></div>
      </div>

      <div class="err" id="err"></div>
      <div class="progress"><span class="dot on" id="d1"></span><span class="dot" id="d2"></span><span class="dot" id="d3"></span></div>
    </div>
  </div>

  <div class="wrap">
    <header class="hero">
      <h1 class="title" id="main-title">Happy 4 Months, Sophia! üíñ</h1>
      <div class="center-card card" id="letter-card">
        <div class="letter" id="letter"></div>
        <div class="controls"><button class="cta" id="love-btn">Things I love about you</button></div>
      </div>
    </header>

    <footer>
      From Justin ¬∑ Anniversary: September 9, 2025 ¬∑ psst: press this month's anniversary numbers (0 9 0 9 2 5) for a surprise.
    </footer>
  </div>

  <script>
    // Personalization
    const NAME = 'Sophia';
    const FROM = 'Justin';
    const MONTHS = 4;
    const DATE_STR = 'September 9, 2025';

    // Letter text
    const letterText = `Hi ${NAME},

Happy ${MONTHS} months! On ${DATE_STR}, I just want to say how grateful I am for you ‚Äî your warmth, your strength, and the way you turn ordinary days into tiny miracles.

Thank you for your care, your honesty, and the way you always meet me where I am. I love your mind, your heart, and how we‚Äôve built our own little world together.

Here‚Äôs to us ‚Äî to the inside jokes, the future plans, and all the moments I‚Äôll keep replaying.

Always,
${FROM} ‚ô°`;

    function typewriter(el, text, speed=22){
      el.textContent = '';
      const caret = document.createElement('span');
      caret.className = 'type-caret';
      el.appendChild(caret);
      let i = 0;
      const tick = () => {
        if (i < text.length){
          const ch = text[i++];
          caret.insertAdjacentText('beforebegin', ch);
          setTimeout(tick, ch === '\n' ? 120 : speed); // ‚úÖ fixed newline check
        } else {
          caret.remove();
        }
      };
      tick();
    }

    // Show letter once gate completes
    function showLetter(){ typewriter(document.getElementById('letter'), letterText); }

    // Floating hearts
    const floatArea = document.getElementById('float-area');
    function spawnHeart(){
      const h = document.createElement('div');
      h.className = 'heart';
      h.textContent = '‚ù§';
      const size = 12 + Math.random()*24;
      h.style.left = Math.random()*100 + 'vw';
      h.style.fontSize = size + 'px';
      h.style.animationDuration = (6 + Math.random()*6) + 's';
      floatArea.appendChild(h);
      setTimeout(()=> h.remove(), 12000);
    }
    function burstHearts(n=40){ for(let i=0;i<n;i++) setTimeout(spawnHeart, i*35); }

    // Surprise code: press digits 0 9 0 9 2 5
    const TARGET = '090925';
    let buf = '';
    addEventListener('keydown', (e)=>{
      if(!/^[0-9]$/.test(e.key)) return;
      buf += e.key;
      if(!TARGET.startsWith(buf)) buf = (e.key === TARGET[0] ? e.key : '');
      if(buf === TARGET){ burstHearts(90); buf=''; }
    });

    // Love Reasons: spammable sticky notes
    const REASONS = [
`Your gorgeous eyes`,
`Your smile (i could stare at your smile for hours)`,
`Your voice`,
`Your passion`,
`Your empathy`,
`How you‚Äôre always there for me when I‚Äôm down`,
`Your maturity`,
`Your intelligence`,
`How you talk me through every emotion I have`,
`How you understand me so well`,
`How you always know the answer to how I feel`,
`Whenever I see 10+ notifications from you on tiktok`,
`How well you understand yourself`,
`Your eyelids`,
`Your growth`,
`Your passion for things you love. (and hate...)`,
`Your taste in music`,
`THAT LADYBUG HAIRCLIP OF YOURS`,
`That amaaaazing bracelet you have on`,
`Your crazy cats & soup progress...`,
`Your passion in mental health`,
`Your love for helping others`,
`Your selflessness`,
`Your love for thrifting`,
`Your love for cheesecake (i love cheescake....)`,
`The way you try`,
`The way you take time to reflect`,
`Your mind`,
`Your qdoba quesadilla (i need to try it so badly)`,
`Your writing`,
`The way your room is so thoughtfully decorated`,
`Your communication`,
`Idk if this counts but I love your dogs so much........`,
`Your bizzare ability to build legos so fast...`,
`The way you can take my dumb jokes`,
`Your laugh`,
`Your ‚Äúrah rah rah‚Äùs`,
`That‚Äôs great vaughn‚Ä¶.`,
`Your playlists ESPECIALLY ‚ù§Ô∏è`,
`Your kindness to strangers (trust me it never goes unnoticed)`,
`Your hugs that feel like home (even the virtual ones)`,
`Your courage to say the hard, honest thing (thank you for asking me out‚Ä¶)`,
`Your patience with me`,
`Your ability to bring everybody around you up`,
`Your belief in me`,
`THE SELFIES YOU TAKE WITH YOUR TONGUE STUCK OUT`,
`The dreaded ‚Äúpills‚Äù alarm...`,
`That litlte super random baking competition trophy you have`,
`Your messages on couple joy`,
`The way you wait to talk to me before sleeping`,
`The way you‚Äôd give up sleep for me (i would too love i love you so much)`,
`Your compassion for your dogs`,
`Your love for your movies and shows`,
`Your honesty with me when I need advice`,
`Your gentleness with yourself (You‚Äôve grown so much)`,
`Your accountability (you show up. always.)`,
`The handshake we made when you visited me at Vandy`,
`Your ability to always find the underground things`,
`Your ‚ÄúI saw this and thought of you‚Äù moments`,
`Your smell`,
`Your We‚Äôre not really strangers game you carry around everywhere`,
`Your willingness to apologize and repair things`,
`The way you feel for others`,
`Your gift giving`,
`Your willingness to learn and unlearn things`,
`Your voice memos (my prized posessions)`,
`How you love and also hate holding hands`,
`Your laughs at my worst jokes`,
`Your commitment to growth over perfection`,
`Your way of making ordinary days feel special`,
`Your faith in us`,
`Your kindness to the service workers out there (always leave a tip guys)`,
`Your memory for the small things`
    ];

    function rand(min,max){ return Math.random()*(max-min)+min; }
    function spawnNote(){
      const note = document.createElement('div');
      note.className = 'love-note pop';
      note.innerHTML = `<b>Reason:</b> ${REASONS[Math.floor(Math.random()*REASONS.length)]}`;
      const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
      const vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);
      const x = rand(20, vw-300); const y = rand(80, vh-220);
      note.style.left = x+"px"; note.style.top = y+"px";
      document.body.appendChild(note);
      setTimeout(()=> note.remove(), 3600);
      burstHearts(8);
    }
    document.getElementById('love-btn').addEventListener('click', spawnNote);

    // ===== Quiz logic (single script tag; no nesting) =====
    const PASS1 = 'imjoeinlovewithyou';
    const PASS2 = 'ladybug';
    const PASS3 = 'bobert';

    // Normalize input: lowercase, remove spaces & punctuation
    function norm(s){
      return (s||'')
        .toString()
        .normalize('NFKD')
        .toLowerCase()
        .replace(/\s+/g, '')
        .replace(/[^a-z0-9]/g, '');
    }

    const err = document.getElementById('err');
    const q1  = document.getElementById('q1');
    const q2  = document.getElementById('q2');
    const q3  = document.getElementById('q3');
    const d1  = document.getElementById('d1');
    const d2  = document.getElementById('d2');
    const d3  = document.getElementById('d3');

    function showQ(el){
      q1.style.display='none';
      q2.style.display='none';
      q3.style.display='none';
      el.style.display='block';
    }

    function checkPass(inputId, expected, nextEl, dotEl){
      const inp = document.getElementById(inputId);
      const ok  = norm(inp.value) === norm(expected);

      if(ok){
        err.style.color = '#2e7d32';
        err.textContent = '‚úì unlocked!';
        if(dotEl) dotEl.classList.add('on');

        if(nextEl){
          showQ(nextEl);
          const nextInput = nextEl.querySelector('input');
          setTimeout(()=> nextInput && nextInput.focus(), 50);
        } else {
          document.getElementById('gate').style.display = 'none';
          showLetter();
          burstHearts(36);
        }
      } else {
        err.style.color = '#c6285b';
        err.textContent = 'Close, but not quite. Try the hint!';
        inp.style.borderColor = '#ff6b9e';
        setTimeout(()=> inp.style.borderColor = '#ffd3e1', 600);
      }
    }

    document.getElementById('btn1').addEventListener('click', ()=> checkPass('in1', PASS1, q2, d2));
    document.getElementById('btn2').addEventListener('click', ()=> checkPass('in2', PASS2, q3, d3));
    document.getElementById('btn3').addEventListener('click', ()=> checkPass('in3', PASS3, null, null));

    ['in1','in2','in3'].forEach((id, i)=>{
      const btn = document.getElementById(['btn1','btn2','btn3'][i]);
      const inp = document.getElementById(id);
      inp.addEventListener('keydown', e=>{ if(e.key==='Enter'){ btn.click(); }});
    });

    // Autofocus first input on DOM ready
    window.addEventListener('DOMContentLoaded', ()=> {
      document.getElementById('in1').focus();
      showQ(q1);
      d1.classList.add('on');
    });
  </script>
</body>
</html>
